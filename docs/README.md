# 미션 - 로또

주어진 미션 요구사항에 맞추어 로또 어플리케이션을 구현합니다.

## 🤔 요구사항 리스트

- [x] 프로그램 시작 시 구입 금액을 입력받는다.
  - [x] 입력값이 잘못되었을 경우, 에러를 출력하고 그 부분부터 다시 입력받는다.
  - [x] 입력값은 1000원 단위로 입력받는다. 1000원으로 나누어 떨어지지 않을 경우 예외처리한다.
  - [x] 그 외의 예외 사항은 별도로 정한다.
- [x] 입력된 금액만큼 로또를 발행한다.
- [x] 발행한 로또 수량을 출력한다.
- [x] 발행한 각 로또의 번호를 형식에 맞춰 출력한다.
  - [x] 로또 번호는 배열의 형태로 출력한다.
  - [x] 번호를 오름차순으로 정렬하여 출력한다.
  - [x] 번호는 `, ` 를 기준으로 구분한다.
- [x] 사용자로부터 당첨 번호를 입력받는다.
  - [x] 입력값이 잘못되었을 경우, 에러를 출력하고 그 부분부터 다시 입력받는다.
  - [x] 입력값은 로또 숫자 범위 (1~45)이내의 자연수여야 한다.
  - [x] 입력값은 `,`를 기준으로 구분한다.
  - [x] 입력값에 중복된 숫자가 포함될 수 없다.
- [x] 사용자로부터 보너스 번호를 입력받는다.
  - [x] 보너스 번호는 로또 숫자 범위 (1~45) 이내의 자연수여야 한다.
  - [x] 보너스 번호는 설정된 당첨 번호와 중복될 수 없다.
- [x] 로또 시행 결과를 출력한다.
- [x] 3개 ~ 6개 일치 시 상금과 일치한 로또 갯수를 표로 출력한다.
  - [x] 당첨금은 천원 단위로 `,` 를 넣어 구분한다.
- [x] 총 수익률을 출력한다.
  - [x] 수익률은 소수점 둘째 자리에서 반올림한다. (ex: 100.0%, 51.5%)
  - [x] 수익률은 천 단위로 `,`로 구분한다. (ex: 1,000.0%)
- [x] 예외 상황 발생 시 `[ERROR]`로 시작하는 에러 문구를 출력해야 한다.

## 😠 이번 주차에 적용해볼 개선점

- 의사 결정에 근거 가지기
- 모듈의 독립성 확보하기 (떼다가 딴 데 끼워도 되도록 만들어보기)
- 유효성 검사는 View에서 값의 근본적 검사, 모델에서 구체적 로직에 관련된 검사
- 출력 형식에 관한 로직을 모아서 관리하기
- 오버엔지니어링하지 않기(?) => 좀 더 단순하고 직관적인 해결책을 고려해보기
- 트레이드오프를 생각하기
- 상수 관리하기
  - 한 곳에서만 쓰이는 상수는 별도 파일로 분리하지 말고 쓰이는 class 내에서 static 필드로 관리
  - 상수가 여러 곳에서 쓰이거나, 앞으로 그럴 가능성이 있을 경우 별도 파일로 관리
  - 상수 정의할 때 부분으로 정의하고 마지막에 합쳐서 내보내기
  - 상수 정의 시 Object.freeze 사용

## 🧐 실제 구현 사항 리스트

### 🎮 앱 세부 구현 사항

#### View

- [ ] InputView, OutputView를 각각 구현하고, View에서 이를 활용한다.
- [ ] InputView, OutputView는 각각 입/출력에 관한 가장 단순한 단위의 메서드와 유효성 검사를 제공한다.
  - [ ] InputView에서는 입력값의 형태(숫자인지, 여러 개의 숫자로 이루어진 문자열인지 등)를 검사한다.
- [ ] View에서는 비즈니스 로직에 연관된 입/출력 메서드를 제공한다.
  - [ ] 구매 금액/당첨 번호/보너스 번호를 입력받고 형변환하여 반환
  - [ ] 구매 결과를 출력
  - [ ] 당첨 결과 통계를 출력
  - [ ] 수익률을 출력

#### Controller

- [ ] 컨트롤러에서는 View를 이용해 입력을 받고 이를 처리하며, 처리된 값을 다시 View로 넘겨 출력한다.
- [ ] 앱에서 입력을 받는 부분(구매 금액, 당첨 번호, 보너스 번호)에서 오류가 발생할 시, 해당 부분을 다시 실행하여 **오류가 발생한 부분을 다시 입력받도록** 처리한다.
- [ ] 구매금액을 입력받아 LottoPublisher로 넘기고, 반환받은 Lotto 인스턴스 배열을 LottoService에 세팅한 후 출력한다.
- [ ] 당첨 번호와 보너스 번호를 입력받아 LottoService에 세팅한다.
- [ ] LottoService로부터 계산된 매칭 결과와 수익률 값을 View로 넘겨 출력한다.

#### Models

##### LottoPublisher

- [ ] 입력받은 구매 금액 값을 유효성 검사 후 필드에 할당한다.
  - [ ] 예외가 발생할 경우 컨트롤러로 전파되어 예외 처리가 작동한다.
- [ ] 구매 금액만큼의 로또 인스턴스를 생성하고 배열에 담아 반환한다.

##### LottoService

- [ ] 입력받은 당첨 번호, 보너스 번호를 유효성 검사 후 필드에 할당한다.
  - [ ] 예외가 발생할 경우 컨트롤러로 전파되어 예외 처리가 작동한다.
- [ ] calculator의 계산 함수로 각 필드(당첨 번호, 보너스 번호, 구매한 로또 티켓)를 넘겨 계산값을 반환한다.

##### LottoResultCalculator

- [ ] 각 등수별 당첨 횟수를 저장할 result 객체를 필드로 가진다.
- [ ] 구매한 로또 티켓, 당첨 번호, 보너스 번호를 받아 각 로또의 당첨 결과를 계산하고 result를 업데이트한다.
- [ ] 업데이트된 result 필드를 반환한다.
- [ ] 인자로 받은 구매 금액과 업데이트된 result 필드를 토대로 각 등수별 당첨 금액을 합산해 수익률을 계산하여 반환한다.

#### Validators

##### InputViewValidator

- [ ] **입력값이 적절한 형태인지 확인한다.**
  - [ ] 입력값이 숫자인지 확인한다.
  - [ ] 입력값이 정수인지 확인한다.
  - [ ] 입력값이 양수인지 확인한다.
  - [ ] 여러 숫자 문자열 입력값을 배열로 형변환하고, 각 요소에 대해 상기한 검사를 실행한다.

##### LottoValidator

- [ ] **입력값이 비즈니스 로직에 합당한지 확인한다.**
  - [ ] 로또 번호 혹은 당첨 번호가 1~45 범위 내인지, 6개로 구성되어있는지, 중복값이 없는지 확인한다.
  - [ ] 보너스 번호가 1~45 범위 내인지, 당첨 번호와 중복되는지 확인한다.
  - [ ] 구매 금액이 1000으로 나누어 떨어지는 수인지 확인한다.

#### Other Utils

##### MessageFormat

- [ ] **주어진 값을 출력하기에 적절한 형태의 메세지로 변환한다.**
  - [ ] 로또 구매 갯수를 'n개를 구매했습니다.'형태로 변환한다.
  - [ ] 로또 티켓의 numbers를 [1, 2, 3, 4, 5, 6] 형태로 변환한다.
  - [ ] 상금을 나타내는 숫자에 1000 단위로 쉼표(,)를 적용한다.
  - [ ] 수익률을 나타내는 숫자에 1000 단위로 쉼표(,)를 적용하고, 소수점 첫 번째 자리까지 표시한다.
  - [ ] 각 등수 별로 당첨 숫자 갯수, 보너스 매치 확인 여부, 상금, 당첨 로또 갯수를 표시하는 메세지로 변환한다.
  - [ ] 수익률을 '총 수익률은 n%입니다.'형태로 변환한다.

### 🛠 설계 및 구조 변경 사항

### 📝 테스트 작성 목록
